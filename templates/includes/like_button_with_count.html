<button id="like_button" data-name-id="{{ name.pk }}">
    <div class="{% if name.gender == "M" %} text-cyan-500 {% else %} text-pink-500 {% endif %} bg-white w-10 rounded-full h-10 items-center justify-center flex fav-btn">
        {#        <div class="flex items-center space-x-1">#}
        {% assign liked_by_user = name.like_set.filter(user=user).exists %}

        {% if liked_by_user %}
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M9.625 4.28499L9.96875 4.65999L10.3438 4.31624C11.375 3.28499 12.8438 2.81624 14.25 3.06624C16.4062 3.40999 18 5.28499 18 7.47249V7.62874C18 8.94124 17.4375 10.1912 16.5 11.0662L10.8438 16.3475C10.625 16.5662 10.3125 16.66 10 16.66C9.65625 16.66 9.34375 16.5662 9.125 16.3475L3.46875 11.0662C2.53125 10.1912 2 8.94124 2 7.62874V7.47249C2 5.28499 3.5625 3.40999 5.71875 3.06624C7.125 2.81624 8.59375 3.28499 9.625 4.28499C9.625 4.31624 9.59375 4.28499 9.625 4.28499ZM9.96875 6.78499L8.5625 5.34749C7.875 4.69124 6.90625 4.37874 5.96875 4.53499C4.53125 4.78499 3.5 6.00374 3.5 7.47249V7.62874C3.5 8.53499 3.84375 9.37874 4.5 9.97249L10 15.0975L15.4688 9.97249C16.125 9.37874 16.5 8.53499 16.5 7.62874V7.47249C16.5 6.00374 15.4375 4.78499 14 4.53499C13.0625 4.37874 12.0938 4.69124 11.4062 5.34749L9.96875 6.78499Z"></path>
            </svg>
        {% else %}
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M2 7.79849V7.64224C2 5.45474 3.5625 3.57974 5.71875 3.23599C7.125 2.98599 8.59375 3.45474 9.625 4.48599L10 4.82974L10.3438 4.48599C11.375 3.45474 12.8438 2.98599 14.25 3.23599C16.4062 3.57974 18 5.45474 18 7.64224V7.79849C18 9.11099 17.4375 10.361 16.5 11.236L10.8438 16.5172C10.625 16.736 10.3125 16.8297 10 16.8297C9.65625 16.8297 9.34375 16.736 9.125 16.5172L3.46875 11.236C2.53125 10.361 2 9.11099 2 7.79849Z"></path>
            </svg>
        {% endif %}
    </div>
</button>
<div class="text-gray-500 fav-count" id="like_count">{{ name.like_set.count }}</div>

<script>
    $(document).ready(function () {
        $('#like_button').click(function () {
            var nameId = $(this).data('nameId');

            $.ajax({
                url: '{% url 'like_name' name.pk %}',
                type: 'POST',
                dataType: 'json',
                success: function (response) {
                    let is_liked = response.liked
                    if (is_liked) {
                        $('#like_button').text(`<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 7.79849V7.64224C2 5.45474 3.5625 3.57974 5.71875 3.23599C7.125 2.98599 8.59375 3.45474 9.625 4.48599L10 4.82974L10.3438 4.48599C11.375 3.45474 12.8438 2.98599 14.25 3.23599C16.4062 3.57974 18 5.45474 18 7.64224V7.79849C18 9.11099 17.4375 10.361 16.5 11.236L10.8438 16.5172C10.625 16.736 10.3125 16.8297 10 16.8297C9.65625 16.8297 9.34375 16.736 9.125 16.5172L3.46875 11.236C2.53125 10.361 2 9.11099 2 7.79849Z"></path>
                        </svg>
                        `);
                    } else {
                        $('#like_button').text(`<svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9.625 4.28499L9.96875 4.65999L10.3438 4.31624C11.375 3.28499 12.8438 2.81624 14.25 3.06624C16.4062 3.40999 18 5.28499 18 7.47249V7.62874C18 8.94124 17.4375 10.1912 16.5 11.0662L10.8438 16.3475C10.625 16.5662 10.3125 16.66 10 16.66C9.65625 16.66 9.34375 16.5662 9.125 16.3475L3.46875 11.0662C2.53125 10.1912 2 8.94124 2 7.62874V7.47249C2 5.28499 3.5625 3.40999 5.71875 3.06624C7.125 2.81624 8.59375 3.28499 9.625 4.28499C9.625 4.31624 9.59375 4.28499 9.625 4.28499ZM9.96875 6.78499L8.5625 5.34749C7.875 4.69124 6.90625 4.37874 5.96875 4.53499C4.53125 4.78499 3.5 6.00374 3.5 7.47249V7.62874C3.5 8.53499 3.84375 9.37874 4.5 9.97249L10 15.0975L15.4688 9.97249C16.125 9.37874 16.5 8.53499 16.5 7.62874V7.47249C16.5 6.00374 15.4375 4.78499 14 4.53499C13.0625 4.37874 12.0938 4.69124 11.4062 5.34749L9.96875 6.78499Z"></path>
                        </svg>
                        `);
                    }
                },
                error: function (error) {
                    console.error("Error liking the name:", error);
                }
            });
        });
    });
</script>
